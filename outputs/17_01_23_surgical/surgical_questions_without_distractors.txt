--------------------------------------------------
TEXT: Accurate estimation of Duration of Surgery can lead to cost-effective utilization of surgical staff and Operating Rooms and decrease patients’ waiting time. In this study, we present a supervised DOS nonlinear regression prediction model whose accuracy outperforms earlier results. In addition, unlike previous studies, we identify the features that influence DOS prediction. Further, in difference from others, we study the causal relationship between the feature set and DOS. The feature sets used in prior studies included a subset of the features presented in this study. This study aimed to derive influential effectors of DOS via optimized prediction and causality analysis. We implemented an array of Machine Learning algorithms and trained them on datasets comprising surgery-related data, to derive DOS prediction models. The datasets we acquired contain patient, surgical staff, and surgery features. The datasets comprised 23,293 surgery records of eight surgery types performed over a 10-year period in a public hospital. We have introduced new, unstudied features and combined them with features adopted from previous studies to generate a comprehensive feature set. We utilized feature importance methods to identify the influential features, and causal inference methods to identify the causal features. Our model demonstrates superior performance in comparison to DOS prediction models in the art. The performance of our DOS model in terms of the Mean Absolute Error was 14.9 minutes. The algorithm that derived the model with the best performance was the Gradient Boosted Trees. We identified the 10 most influential features and the 10 most causal features. In addition, we showed that 40% of the influential features have a significant (p-value = 0.05) causal relationship with DOS. We developed a DOS prediction model whose accuracy is higher than that of prior models. This improvement is achieved via the introduction of a novel feature set on which the model was trained. Utilizing our prediction model, hospitals can improve the efficiency of surgery schedules, and by exploiting the identified causal relationship, can influence the DOS. Further, the feature importance methods we used can help explain the model’s predictions.

Qs: What do we present in this study? --- A supervised model for Duration of Surgery (DOS).
Qs: How is the accuracy of the DOS prediction model improved? --- To improve the accuracy of Duration of Surgery (DOS) prediction models, we introduce a novel feature set on which the model was trained.
Qs: What did we identify? --- The 10 most influential features and the 10 causal features
--------------------------------------------------
TEXT: High cost of surgeries and Operating Rooms have made them key elements for hospital administrators looking to streamline expenses. OR underutilization results in negative consequences such as staff idle time, increased patient waiting times for surgeries, and more. OR overutilization might overload the staff, increase patient waiting time and dissatisfaction, generate disorder, increase the probability of human error. Current practices suggest that physicians who are hospital staff members schedule the surgeries. As shown in the art, however, physicians tend to predict Duration of Surgery inaccurately, thus causing sub-optimal scheduling.  Machine Learning techniques are widely used in health informatics studies. With the increase in surgery documentation in Electronic Health Records, ML has become very relevant for DOS prediction. Explaining predictions produced by ML models is a necessary element of ML research in healthcare [12] Explaining the importance of each feature to the model sheds light on the model’s behavior. Such understanding allows domain experts, i.e., physicians and surgeons, to validate the model's predictions and gives them a tool for optimizing surgery management.  Causal inference addresses the problem of identifying cause and effect relationships in data [17] and has a central role in healthcare [19] Unlike previous studies, our focus is on the importance of features and the effect of that importance on the model and the predicted DOS. Our models provide a prediction for both the elective and the emergency surgery classes. We study a broad range of patient features (age, gender, BMI, etc. ) and surgical staff features. In addition, we use explanatory algorithms to analyze our model’s predictions and causal inference algorithms.  Using our prediction model, OR management teams can improve the performance of surgery scheduling in terms of patient waiting time and surgery team idle time. This study has several OR management implications. Using the identified causal relationships, OR teams can control and adjust DOS values. The paper proceeds as follows. The Introduction section presents the state-of-the-art, the motivation for this study, and its objectives.

Qs: What are some of the things we do to help the model's predictions? --- In this paper, we use Machine Learning (ML) to predict Duration of Surgery (DOS) for both elective and emergency surgeries. we use a broad range of patient features and surgical staff features to explain the model’s predictions. we also use explanatory algorithms to analyze our model’ s predictions and causal inference algorithms. we provide a prediction for both the elective (elective surgery) and the emergency surgery classes. we study a wide range of patients and surgical personnel features. we analyze the model's predictions using explanatorial algorithms.
--------------------------------------------------
TEXT: Our methodology comprises six stages, as follows: collecting and preprocessing a dataset, finding the causal relationship between features and Duration of Surgery; developing a DOS supervised regression model, referred to as DOSM. Fig 1 presents a flowchart of the methodology.

Qs: What are the six stages of the methodology? --- Collecting and preprocessing a dataset, finding the causal relationship between features and Duration of Surgery (DOS); developing a dos-supervised regression model, referred to as dosm.
--------------------------------------------------
TEXT: The data was obtained from the Tel Aviv Sourasky Medical Center’s (TASM) (a public hospital) surgery department. The data included 23,293 retrospective surgical records, focusing on the eight most common surgeries in this department between 2010 and 2020. The full list of features is shown in Table 1. The table shows feature names, indication of whether a feature is novel (by a V in the Novel column), the value range of each feature, and values’ statistics. For handling missing data of other features, we used the Sequence of Regression Models technique.  The missing values of features were computed using the values of other features.

Qs: What was used to handle missing data of other features? --- Sequence of Regression Models (SRM) technique.
Qs: Where was the data obtained from? --- Tel Aviv Sourasky Medical Center (TASM) (a public hospital)
--------------------------------------------------
TEXT: The Average Treatment Effect of a feature (whose value range is binary) measures the difference in the mean of the outcomes between data records with different values assigned to the feature. Since our study is observational, the ATE values could not be computed accurately, as a feature in a surgery record only has an observed value and cannot be assigned other values [29] We use Eq (1) and its extensions to calculate ATE. Two main Machine Learning model types, propensity and heterogeneity models, are used for estimating causal effects.  The propensity score is the probability of a record to have a particular feature value given a set of observed other features. Propensity scores are used to reduce confounding variables’ effects and the implied bias. The latter models are used for estimating the heterogeneity of the treatment effect [31] To develop the heterogeneity model, we used forest-based algorithms.

Qs: What are the two main Machine Learning model types? --- Propensity score and heterogeneity model
Qs: What does the Average Treatment Effect of a feature do? --- Measures difference in the mean between data records with different values assigned to a feature whose value range is binary
Qs: What are the two main Machine Learning model types used for estimating causal effects? --- Average Treatment Effect (ATE) values could not be computed accurately, as a feature in a surgery record only has an observed value and cannot be assigned other values. we use eq (1) and its extensions to calculate ate. two main Machine Learning (ML) model types, propensity and heterogeneity models, are used for estimating causal effects.
Qs: What are the heterogeness and propensity models? --- Propensity models are used to reduce confounding variables’ effects and the implied bias. the latter models are use for estimating the heterogeneity of the treatment effect. to develop the heterogeness model, we used forest-based algorithms.
--------------------------------------------------
TEXT: Recent studies have shown that RF, Gradient Boosted Trees, and Deep Neural Networks are capable of accurately predicting both binary and high-variance continuous variables in the healthcare domain. For training and testing our model, we split the Surgery Dataset: 70% for training and 30% for testing. We measured the performance metrics for the whole training set and for each of its sub-sets, partitioned by surgery type.

Qs: What dataset was used for training and testing? --- The Surgery Dataset (SD) was used
Qs: What percentage of the Surgery Dataset was used for training model? --- 70% of the Surgery Dataset (SD) was used for training model.
Qs: What models were used to predict binary and high-variance continuous variables in the healthcare domain? --- We used the following models: rf Gradient Boosted Trees (GBT) Deep Neural Networks (DNNs).
Qs: What did we split for training and testing? --- Surgery Dataset (SD): 70% for training and 30% for testing.
Qs: What three types of models were used? --- A model was trained on this dataset. the model was composed of: rf, Gradient Boosted Trees (GBT), and Deep Neural Networks (DNNs).
--------------------------------------------------
TEXT: To evaluate our model’s performance, we used the regression metrics Mean Absolute Error, Mean Absolute Percentage Error and Root Mean Square Error The metrics are computed as follow: yi is the predicted Duration of Surgery value of record i, ti is the true value of DOS, and n is the number of records. To evaluate the grid search output, We used K-fold cross-validation, a commonly used method to fully and effectively utilize data.

Qs: What method is commonly used to fully and effectively utilize data? --- This method is used to evaluate the performance of a model. the metrics used are Mean Absolute Error (MAE), mean absolutity percentage (map), and root mean square erron (rmse). the k-fold cross-validation method is commonly used to fully and effectively utilize data.
Qs: What method was used to evaluate the grid search output? --- Mean Absolute Error (MAE), mean absolutity percentage erron and Root Mean Square Error (RMSE) are regression metrics. k-fold cross-validation is a commonly used method to fully and effectively utilize data.
Qs: What metrics were used to evaluate the model's performance? --- Three regression metrics were used: Mean Absolute Error (MAE), mean absolutity percentage erron and root mean square err.
--------------------------------------------------
TEXT: To identify the features that influence the Duration of Surgery prediction, we employed feature importance methods that do not depend on the algorithm type. We used Pearson correlation to compute the correlation between the independent features and the dependent feature. Then, we used Shapley Additive Explanations to estimate the contribution of each feature to the model’s prediction.

Qs: What was the baseline model able to predict? --- The baseline was a model that used a single feature to predict the Duration of Surgery (DOS). the model was able to predict a significant amount of the duration.
Qs: What methods did we use to compute the correlation between the independent features and the dependent feature? --- Pearson correlation and SHAP
Qs: What did we use to identify the features that influence the Duration of Surgery prediction? --- We used pearson correlation to compute the correlation between the independent features and the dependent feature and then, we used Shapley Additive Explanations (SHAP) to estimate the contribution of each feature to the model’s prediction.
--------------------------------------------------
TEXT: We filtered out features that had high correlation with the causal features so that the comparison would not be based on highly correlated features. To calculate feature importance, we developed a Duration of Surgery prediction model using the features in CF and Filtered Non-causal Feature Set. We aimed to identify features that influence DOS prediction and also have a causal relationship with DOS. In addition, we examined whether a feature that has a positive causal effect on DOS also had a positive effect on the DOS predicted value. We call this model DOSM-F, as it is similar to DOSM, but with filtered features.  DOSM-F model was used to estimate the potential change in the DOS as a result of variations in causal feature values. Training using only CF values allowed the CF values to have a bigger impact on the prediction value of the model.

Qs: What did we do so that the comparison would not be based on highly correlated features? --- Filtered out features that had high correlation with the causal
Qs: What was the DOSM-F model used for? --- The model dosm-f is similar to dosm, but with filtered feature set. the model was used to estimate the potential change in the Duration of Surgery (DOS) as a result of variations in causal feature values.
--------------------------------------------------
--------------------------------------------------
--------------------------------------------------
TEXT: Causal analysis models we used were trained on the Surgery Dataset. The inputs to these models are a vector of the counterfactual features X and a vector for the model’s target feature Y. The hyperparameter values we used to optimize the Heterogeneity Treatment Effect and propensity models are listed in Table 3. Table 4 presents the 10 features whose absolute Average Treatment Effect values were the highest, in decreasing order. Half of the top 10 causal features are among the novel features shown in Table 1. The LassoCV algorithm is an iterative algorithm that finds the optimal parameters for a Lasso model using cross-validation.

Qs: What dataset were the causal analysis models trained on? --- Surgery Dataset (SD).
Qs: What are the inputs to the causal analysis models? --- Counterfactual features x and vector for the model’s target feature y
Qs: What model was used for causal analysis? --- We used the Heterogeneity Treatment Effect (HTE) model. the propensity model was used for causal analysis.
Qs: How many of the top 10 causal features are among the novel features? --- A total of 10 causal feature vectors were used to model a Surgery Dataset (SD). the top 10 causal features are shown in table 1. half of these features are among the novel features.
--------------------------------------------------
TEXT: We trained the Duration of Surgery models on the dataset using several Machine Learning algorithms. The algorithms that generated the top performing models–GBT being the best–are presented in Table 6. The Mean Absolute Error values in the table suggest that the performance is similar across the three algorithms, with Gradient Boosted Trees performing a bit better. We have calculated the model’s uncertainty as follows: For each record in the test set, we used the DOSM to predict a list of probabilities from each tree in the GBT. The derived uncertainty of the model was 4.1 minutes.

--------------------------------------------------
TEXT: Barket-FM-DOSM is a Duration of Surgery model using the features and the methods used in Barket et al. (2019) but trained on our Surgery Dataset. The Mean Absolute Error value of our model–DOSM–is lower than the MAE values derived for Barket. This comparison led to the conclusion that neither the Machine Learning algorithms nor the dataset are the source of differences in the models performance. The major effector of such differences is the set of features.

Qs: What dataset was the Barket-FM-DOSM trained on? --- Surgery Dataset (SD).
Qs: What model is used in the paper? --- The paper uses the barket-fm-dosm model
--------------------------------------------------
TEXT: Feature importance was computed using the Shapley Additive Explanations algorithm. Half of the 10 most influential features are among the novel features presented in Table 1 in Section 2. The 8 features with the highest absolute Pearson correlation values vis-à-vis Duration of Surgery are presented in decreasing order of correlation values. We observe that 3 out of 8 (37.5%) of the features selected are the same for both methods, SHAP and Pearson correlation. The higher the vertical location of a dot indicates its feature’s value effect on DOS, i.e.e., the impact on the model's output.

Qs: Where is Table 1 located? --- Section 2
Qs: What was used to compute feature importance? --- The Shapley Additive Explanations (SHAP) algorithm.
Qs: 3 out of 8 features selected are the same for which two methods? --- Shapley Additive Explanations (SHAP) and pearson correlation.
--------------------------------------------------
--------------------------------------------------
TEXT: We used Machine Learning techniques to develop supervised ML models that predict Duration of Surgery from features related to patients, physicians, and surgeries. For training the models, we built a dataset of 23,293 records, collected and processed in collaboration with one of the biggest public hospitals in Israel. The performance of our DOS model in terms of Mean Absolute Error was 14.9 minutes. The Average Treatment Effect value of the 10 most influential features by Shapley Additive Explanations that derived the model with the best performance was the Gradient Boosted Trees. The model outperformed earlier models.  Using the DOS value predicted by our model for surgery scheduling can decrease patient waiting time and minimize surgical staff idle time. Using the identified causal relationship, OR management teams can apply measures to affect DOS. Future research could study additional surgery types at different hospitals to broaden applicability of our results. Further research is needed to quantify potential cost-saving and OR utilization when using the DOSM.

Qs: What model had the best performance? --- A Gradient Boosted Trees (GBT) model
Qs: Did the model outperform earlier models? --- The study used supervised Machine Learning (ML) models to develop supervised models that predict Duration of Surgery (DOS) from features related to patients, physicians, and surgeries. the model outperformed earlier models.
Qs: What did the model do in terms of MAE? --- Models that predict Duration of Surgery (DOS) from features related to patients, physicians, and surgeries. models outperformed earlier models in terms of Mean Absolute Error (MAE).
Qs: What did we do to decrease patient waiting time? --- Using Machine Learning (ML) to predict Duration of Surgery (DOS) from features related to patients
--------------------------------------------------
